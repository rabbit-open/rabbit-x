<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width,initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
    <script src="jquery-1.7.2.min.js" type="text/javascript"></script>

    <title>兔子测试配置</title>
    <link href="dist/jsoneditor.css" rel="stylesheet" type="text/css">
    <script src="dist/jsoneditor.js"></script>

    <style type="text/css">
    body {
      font: 10.5pt arial;
      color: #4d4d4d;
      line-height: 150%;
      width: 100%;
    }

    code {
      background-color: #f5f5f5;
    }

    #jsoneditor {
      width: 100%;
      height: 800px;
    }


    </style>

    <script type="text/javascript"></script>

</head>

<body>
<div style="width:100%;overflow:hidden;background:#e5e5e5;height:100%;">

    <table border="1" cellpadding="0" cellspacing="0" width="100%">
        <tr>

            <td style="width:100%;background-color:#FFC1C1;padding:10px 5px 15px 20px;">
                <div>
                    <form>
                        <h2>2 手动添加测试接口</h2>
                        <h4>API名称</h4>
                        <textarea style="width:80%;" id="firstname1"
                                  rows="2"></textarea>
                        <br/>
                        <h4>API数据</h4>
                        <button type="button" style="width:200px;height:45px;"
                                onclick="javascript:saveconfig2('aa')">
                            添加
                        </button>
                        <br/>
                        <br/>
                        <div id="jsoneditor" style="font-size:16"></div>

                    </form>
                </div>
            </td>
        </tr>

    </table>

</div>

</body>


<script type="text/javascript">
    var c=false;
    var t;
    var $trs="";
    var $data="";

var container = document.getElementById('jsoneditor');
var options = {
    mode: 'text',
    modes: ['code', 'form', 'text', 'tree', 'view'], // allowed modes
    onError: function (err) {
      alert(err.toString());
    },
    onModeChange: function (newMode, oldMode) {
      console.log('Mode switched from', oldMode, 'to', newMode);
    }
  };
var json = {};
var editor = new JSONEditor(container, options, json);

    //保存测试接口
    function saveconfig2(data){

      var  name= $("#firstname1").val();
      var  data= editor.getText();

      var urlpath = 'addmockapi'+ '?apikey='+ name+'&data='+ data;

      $.getJSON(urlpath, function(data) {

              if(data){
                alert('保存成功');
              }
      });

    }

</script>

</html>