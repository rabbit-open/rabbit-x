<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width,initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
    <script src="jquery-1.7.2.min.js" type="text/javascript"></script>

    <title> 读取抓取数据</title>

    <script type="text/javascript">

     function getapidata(api){

         var $firstname = $("#firstname").val();

         var url = 'getmockdata' + '?api='+$firstname;

         $("#datalist").html('');

         $("#datalist").append('<tr style="width:100%;"><td  style="width:20%;">接口名称</td><td  style="width:30%;">接口参数</td><td  style="width:40%;">接口数据</td><td  style="width:10%;">接口时间</td></tr>');

         $.getJSON(url, function(data) {

                  for (var i = 0; i < data.length; i++) {
                    var $trs=$('<tr style="width:100%;"><td onclick=savemock("'+ data[i].id+'","'+data[i].url+'") style="width:20%;">' + data[i].url + '</td><td  style="width:30%;"><textarea style="width:90%;" rows="3">' + data[i].requestParam + '</textarea></td><td  style="width:40%;"><textarea style="width:90%;" rows="3">' + data[i].data + '</textarea></td><td  style="width:10%;">' + data[i].time + '</td></tr>');
                    $("#datalist").append($trs);
                  }

         });

    }

    function savemock(id,url) {
        var  $url= "apidetail.html?id="+id;
        window.open($url,'_blank')
    }


    </script>

</head>

<body>


<div style="width:100%;overflow:hidden;">

    <table style="width:100%;">
        <tr>
            <td>
                <!--<h1>读取API数据</h1>-->
                <!--<br>-->
                <!--<hr>-->
                <h4>请输入查询接口全名称:</h4>
                <textarea style="width:80%;height:40px;padding:10px 10px 10px  10px;" id="firstname"
                          rows="2"></textarea>
                <br>
                <br>
                <button type="button" style="width:20%;height:45px;"
                        onclick="javascript:getapidata('aa')">
                    查看测试数据
                </button>

            </td>
        </tr>
    </table>

    <table id="datalist"
           style="width:100%;word-break:break-all;margin:none;padding:0px;border:none;" border="1">

    </table>

</div>

</body>

</html>